<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="绮罗传香"><meta name="copyright" content="绮罗传香"><meta name="generator" content="Hexo 6.2.0"><meta name="theme" content="hexo-theme-yun"><title>计网复习笔记-应用层 | 绮罗传香度良辰</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.2.4/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><script src="https://cdn.jsdelivr.net/npm/@unocss/runtime/mini.global.js"></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/png" href="/%E5%93%87%E5%93%A6.ico"><link rel="mask-icon" href="/%E5%93%87%E5%93%A6.ico" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"sagirichan.com","root":"/","title":"绮罗传香度良辰","version":"1.9.1","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"搜索...","empty":"找不到您查询的内容: ${query}","hits":"找到 ${hits} 条结果","hits_time":"找到 ${hits} 条结果（用时 ${time} 毫秒）"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"local_search":{"path":"/search.xml"},"fireworks":{"colors":null},"vendors":{"darken":"https://cdn.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><link rel="alternate" href="/atom.xml" title="绮罗传香度良辰" type="application/atom+xml"><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><meta name="description" content="进程通信 在同一台主机中：两个进程使用进程间通信IPC(由操作系统定义)通信.  在不同的主机中：进程通过交换报文通信    因特网运输协议服务tcp面向连接: 客户机和服务器之间所需的建立 可靠传输：在发送和接收进程之间 流控制: 发送方不会淹没接收方 拥塞控制: 当网络过载时抑制发送方 并不提供: 定时，最小带宽保证 udp在发送进程及接收进程之间的不可靠数据传输 不提供：建立连接建立，可靠性">
<meta property="og:type" content="article">
<meta property="og:title" content="计网复习笔记-应用层">
<meta property="og:url" content="http://sagirichan.com/2022/05/13/computer-network-note-applicationLayer/index.html">
<meta property="og:site_name" content="绮罗传香度良辰">
<meta property="og:description" content="进程通信 在同一台主机中：两个进程使用进程间通信IPC(由操作系统定义)通信.  在不同的主机中：进程通过交换报文通信    因特网运输协议服务tcp面向连接: 客户机和服务器之间所需的建立 可靠传输：在发送和接收进程之间 流控制: 发送方不会淹没接收方 拥塞控制: 当网络过载时抑制发送方 并不提供: 定时，最小带宽保证 udp在发送进程及接收进程之间的不可靠数据传输 不提供：建立连接建立，可靠性">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2022/05/10/wV6lM5ueNE3cxHS.png">
<meta property="og:image" content="https://s2.loli.net/2022/05/10/Ut2nKwcEVqf36rT.png">
<meta property="og:image" content="https://s2.loli.net/2022/05/10/l152vsbQLx9ESpw.png">
<meta property="og:image" content="https://s2.loli.net/2022/05/10/Txz9sbuaXABdUD8.png">
<meta property="og:image" content="https://s2.loli.net/2022/05/10/sMiQAPv9R25zUVa.png">
<meta property="og:image" content="https://s2.loli.net/2022/05/10/Ipdq7yai9YWFbgs.png">
<meta property="article:published_time" content="2022-05-13T12:33:05.000Z">
<meta property="article:modified_time" content="2022-05-15T17:04:47.527Z">
<meta property="article:author" content="绮罗传香">
<meta property="article:tag" content="计算机网络">
<meta property="article:tag" content="笔记">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2022/05/10/wV6lM5ueNE3cxHS.png"><script type="module">import { getScript } from '/js/utils.js'
getScript("https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js", () => {
  const mermaidOptions = {"startOnload":true}
  mermaid.initialize(mermaidOptions);
}, window.mermaid);
</script><style>.mermaid{background: transparent;}</style><script>(function() {
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info mickey-mouse"><a class="site-author-avatar" href="/about/" title="绮罗传香"><img width="96" loading="lazy" src="https://s2.loli.net/2022/05/16/FuHGYpD4vVxLU2i.jpg" alt="绮罗传香"><span class="site-author-status" title="一切都会好起来的">:-)</span></a><div class="site-author-name"><a href="/about/">绮罗传香</a></div><span class="site-name">绮罗传香度良辰</span><sub class="site-subtitle"></sub><div class="site-description"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="我的主页"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">14</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">1</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">5</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="文档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/Ireinasan" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=608906376" title="网易云音乐" target="_blank" style="color:#C20C0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/428379308" title="哔哩哔哩" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="/atom.xml" title="RSS" target="_blank" style="color:orange"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1"><span class="toc-number">1.</span> <span class="toc-text">进程通信</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%A0%E7%89%B9%E7%BD%91%E8%BF%90%E8%BE%93%E5%8D%8F%E8%AE%AE%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.</span> <span class="toc-text">因特网运输协议服务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#tcp"><span class="toc-number">2.1.</span> <span class="toc-text">tcp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#udp"><span class="toc-number">2.2.</span> <span class="toc-text">udp</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#web%E5%92%8CHTTP%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.</span> <span class="toc-text">web和HTTP协议</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Web"><span class="toc-number">3.1.</span> <span class="toc-text">Web</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP"><span class="toc-number">3.2.</span> <span class="toc-text">HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E6%8C%81%E4%B9%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">3.2.1.</span> <span class="toc-text">非持久连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%81%E4%B9%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">3.2.2.</span> <span class="toc-text">持久连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP%E6%8A%A5%E6%96%87"><span class="toc-number">3.2.3.</span> <span class="toc-text">HTTP报文</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87"><span class="toc-number">3.2.3.1.</span> <span class="toc-text">请求报文</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87"><span class="toc-number">3.2.3.2.</span> <span class="toc-text">响应报文</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie"><span class="toc-number">3.3.</span> <span class="toc-text">cookie</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web%E7%BC%93%E5%AD%98-%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">3.4.</span> <span class="toc-text">Web缓存(代理服务器)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B2%A1%E6%9C%89%E7%BC%93%E5%AD%98%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%97%B6"><span class="toc-number">3.4.1.</span> <span class="toc-text">没有缓存服务器时</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%89%E7%BC%93%E5%AD%98%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%97%B6"><span class="toc-number">3.4.2.</span> <span class="toc-text">有缓存服务器时</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6GET"><span class="toc-number">3.5.</span> <span class="toc-text">条件GET</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%EF%BC%9AFTP"><span class="toc-number">4.</span> <span class="toc-text">文件传输协议：FTP</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-number">5.</span> <span class="toc-text">电子邮件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%BB%84%E6%88%90"><span class="toc-number">5.1.</span> <span class="toc-text">电子邮件系统组成:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.2.</span> <span class="toc-text">电子邮件协议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#STMP"><span class="toc-number">5.3.</span> <span class="toc-text">STMP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%82%AE%E4%BB%B6%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F"><span class="toc-number">5.4.</span> <span class="toc-text">邮件报文格式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MIME"><span class="toc-number">5.5.</span> <span class="toc-text">MIME</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%82%AE%E4%BB%B6%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.6.</span> <span class="toc-text">邮件访问协议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8EWeb%E7%9A%84%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-number">5.7.</span> <span class="toc-text">基于Web的电子邮件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9FDNS"><span class="toc-number">6.</span> <span class="toc-text">域名系统DNS</span></a></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="http://sagirichan.com/2022/05/13/computer-network-note-applicationLayer/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="绮罗传香"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="绮罗传香度良辰"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">计网复习笔记-应用层</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <span class="post-meta-icon-text">发表于</span> <time title="创建时间：2022-05-13 20:33:05" itemprop="dateCreated datePublished" datetime="2022-05-13T20:33:05+08:00">2022-05-13</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <span class="post-meta-icon-text">更新于</span> <time title="修改时间：2022-05-16 01:04:47" itemprop="dateModified" datetime="2022-05-16T01:04:47+08:00">2022-05-16</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="本文字数"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-file-word-line"></use></svg></span> <span title="本文字数">2.8k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读时长"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-timer-line"></use></svg></span> <span title="阅读时长">10m</span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">学习笔记</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">计算机网络</span></a><a class="tag-item" href="/tags/%E7%AC%94%E8%AE%B0/" style="--text-color:DarkTurquoise"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">笔记</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><h1 id="进程通信"><a href="#进程通信" class="headerlink" title="进程通信"></a>进程通信</h1><ul>
<li><p>在同一台主机中：两个进程使用进程间通信IPC(由操作系统定义)通信.</p>
</li>
<li><p>在不同的主机中：进程通过交换报文通信</p>
</li>
</ul>
<hr>
<h1 id="因特网运输协议服务"><a href="#因特网运输协议服务" class="headerlink" title="因特网运输协议服务"></a>因特网运输协议服务</h1><h2 id="tcp"><a href="#tcp" class="headerlink" title="tcp"></a>tcp</h2><p>面向连接: 客户机和服务器之间所需的建立</p>
<p>可靠传输：在发送和接收进程之间</p>
<p>流控制: 发送方不会淹没接收方</p>
<p>拥塞控制: 当网络过载时抑制发送方</p>
<p>并不提供: 定时，最小带宽保证</p>
<h2 id="udp"><a href="#udp" class="headerlink" title="udp"></a>udp</h2><p>在发送进程及接收进程之间的不可靠数据传输</p>
<p>不提供：建立连接建立，可靠性，流控，拥塞控制，定时或带宽保证</p>
<hr>
<h1 id="web和HTTP协议"><a href="#web和HTTP协议" class="headerlink" title="web和HTTP协议"></a>web和HTTP协议</h1><h2 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h2><ul>
<li><p>web的应用层协议是HTTP，超文本传输协议</p>
</li>
<li><p>Web页面由对象组成，一个基本HTML文件包含多个引用对象：图片，java小程序，视频文件等</p>
</li>
<li><p>每个对象可由URL(Uniform Resource Locator 统一资源定位符)寻址</p>
</li>
</ul>
<p>举例：</p>
<p><strong>http</strong>: &#x2F;&#x2F;<u>114.514.191.810</u>&#x2F;<em>sennpai&#x2F;suki</em><br><strong>协议</strong>    <u>主机名</u>        <em>路径</em></p>
<h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><p>HTTP协议运行在客户与服务器端的应用程序中。</p>
<ul>
<li><p>客户机：请求、接收、显示Web对象</p>
</li>
<li><p>服务器：Web服务器响应请求而发送对象</p>
</li>
</ul>
<pre class="mermaid">graph LR

C[客户机] --HTTP请求--> S[服务器]

S[服务器] --HTTP响应--> C[客户机]</pre>

<p>非持久连接与持久连接：</p>
<ul>
<li><p>非持久HTTP</p>
<p>  <strong>每个</strong>HTTP请求&#x2F;响应对经过一个<strong>单独TCP连接</strong>发送</p>
<p>  HTTP&#x2F;1.0使用非持久 </p>
</li>
<li><p>持久HTTP</p>
<p>  <strong>多个对象</strong>能够经过客户机和服务器之间的<strong>单个TCP连接</strong>发送</p>
<p>  HTTP&#x2F;1.1以默认模式使用持久连接</p>
</li>
</ul>
<h3 id="非持久连接"><a href="#非持久连接" class="headerlink" title="非持久连接"></a>非持久连接</h3><pre class="mermaid">graph TB

A[1.HTTP客户机向HTTP服务器发起tcp连接] --> 

B[2.HTTP服务器接受连接并通知客户机] -->

C[3.HTTP客户机发送HTTP请求报文进TCP连接套接字,向服务机要对象] -->

D[4.HTTP服务器接收请求报文,形成响应报文包含请求对象,并向套接字发送报文] -->

E[5.HTTP服务器关闭TCP连接] -->

F[6.HTTP客户机接收包含html文件的响应报文并解析] -->

G(若发现html文件中又引用了其他对象,则重复上述步骤向服务器要对象)</pre>

<p>响应时间估算：</p>
<ul>
<li><p>往返时间RTT的定义：从客户机到服务器发送一个小分组并返回所历经的时间.</p>
</li>
<li><p>响应时间</p>
<ul>
<li><p>建立tcp请求：RTT*1</p>
</li>
<li><p>发送HTTP请求并得到回应：RTT*1</p>
</li>
<li><p>传输文件时间</p>
</li>
</ul>
<p>  <img src="https://s2.loli.net/2022/05/10/wV6lM5ueNE3cxHS.png" alt="HTTP-响应时间估算.png" loading="lazy"></p>
<p>  总响应&#x3D; 2RTT+传输时间</p>
</li>
</ul>
<h3 id="持久连接"><a href="#持久连接" class="headerlink" title="持久连接"></a>持久连接</h3><ul>
<li><p>在发送响应后，保持TCP连接持续打开</p>
</li>
<li><p>后继HTTP报文通过该连接持续发送</p>
</li>
</ul>
<p>持久连接又可以分为无流水线与有流水线的连接</p>
<ul>
<li><p>无流水线的连接</p>
<ul>
<li><p>仅当前面的响应已经收到，客户机发出新的请求</p>
</li>
<li><p>对每个引用对象花费一个RTT</p>
</li>
</ul>
<p>  （半自动步枪，每次射击都要扣动扳机（这是什么奇妙的比喻×</p>
</li>
<li><p>有流水线的连接</p>
<ul>
<li><p>不必等待响应，请求接连发出</p>
</li>
<li><p>对所有引用对象花费一个RTT（略多）时间</p>
</li>
</ul>
<p>  （全自动步枪，不必松开扳机，可以一直扣住</p>
</li>
</ul>
<h3 id="HTTP报文"><a href="#HTTP报文" class="headerlink" title="HTTP报文"></a>HTTP报文</h3><p>分为<strong>请求报文</strong>与<strong>响应报文</strong></p>
<h4 id="请求报文"><a href="#请求报文" class="headerlink" title="请求报文"></a>请求报文</h4><p><img src="https://s2.loli.net/2022/05/10/Ut2nKwcEVqf36rT.png" alt="HTTP请求报文.png" loading="lazy"></p>
<ul>
<li><p>通用格式</p>
<ul>
<li><p>请求行：方法字段，URL字段，版本字段</p>
</li>
<li><p>首部行：一般多行</p>
</li>
<li><p>空行</p>
</li>
<li><p>实体主体：可为空</p>
</li>
</ul>
</li>
</ul>
<p>一个简单的例子：</p>
<pre><code>POST /user HTTP/1.1         //请求行
Host: www.user.com
Content-Type: application/x-www-form-urlencoded
Connection: Keep-Alive
User-agent: Mozilla/5.0.    //以上是首部行
                            //空行分割header和请求内容 
name=world                  //请求体
</code></pre>
<blockquote>
<p>方法类型<br>GET：最常用，请求访问网页，实体主体为空<br>POST：常用，提交表单同时请求访问网页，如使用搜索引擎，实体主体中为表单输入值<br>HEAD：少用，测试用，与GET区别在于响应中去掉请求的对象<br>PUT：很少用，向URL字段中定义的路径，上载在实体主体中文件<br>DELETE，很少用，删除在URL字段中定义的文件</p>
</blockquote>
<h4 id="响应报文"><a href="#响应报文" class="headerlink" title="响应报文"></a>响应报文</h4><p>响应报文与请求报文结构类似</p>
<ul>
<li><p>通用格式</p>
<ul>
<li><p>状态行：版本字段，状态码字段，短语字段</p>
</li>
<li><p>首部行：一般多行</p>
</li>
<li><p>空行</p>
</li>
<li><p>实体主体：可为空</p>
</li>
</ul>
</li>
</ul>
<p>一些响应码与响应短语的例子及含义</p>
<ul>
<li><p>200 OK<br>请求成功，请求的对象在这个报文后面</p>
</li>
<li><p>301 Moved Permanently<br>请求的对象已转移，新的URL在响应报文的Location:首部行中指定</p>
</li>
<li><p>400 Bad Request<br>请求报文不为服务器理解</p>
</li>
<li><p>404 Not Found<br>请求的文档没有在该服务器上发现</p>
</li>
<li><p>505 HTTP Version Not Supported</p>
</li>
</ul>
<h2 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h2><p>Cookie是一种在客户端保持HTTP状态信息的技术。</p>
<p>客户端访问网站时，Web服务器会查看、创建、修改Cookie资料，帮助Web站点保存访问者信息：浏览历史，购物车等。</p>
<p>cookie技术组成</p>
<ul>
<li><p>cookie识别码（http请求报文，http响应报文）</p>
</li>
<li><p>客户端保留cookie文件</p>
</li>
<li><p>服务器提供后端数据库</p>
</li>
</ul>
<p>cookie工作过程</p>
<p><img src="https://s2.loli.net/2022/05/10/l152vsbQLx9ESpw.png" alt="cookie.png" loading="lazy"></p>
<h2 id="Web缓存-代理服务器"><a href="#Web缓存-代理服务器" class="headerlink" title="Web缓存(代理服务器)"></a>Web缓存(代理服务器)</h2><ul>
<li><p>Web缓存器：保存最近请求过的web对象</p>
</li>
<li><p>浏览器向缓存发送所有HTTP请求</p>
<ul>
<li><p>对象在缓存中：缓存返回对象</p>
</li>
<li><p>否则缓存向起始服务器请求对象，然后向客户机返回对象</p>
</li>
</ul>
</li>
</ul>
<p>举例：</p>
<h3 id="没有缓存服务器时"><a href="#没有缓存服务器时" class="headerlink" title="没有缓存服务器时"></a>没有缓存服务器时</h3><pre class="mermaid">graph LR

LAN(LAN 100Mbps)

LANroute[机构路由器]

A[浏览器A] --> LANroute
B[浏览器B] --> LANroute
C[浏览器C] --> LANroute

WANroute[公网路由器]

LANroute -.访问链路 15Mbps.-> WANroute

WANroute --> a[起始服务器a]
WANroute --> b[起始服务器b]
WANroute --> c[起始服务器c]</pre>

<p>假定</p>
<ul>
<li><p>平均对象长度 &#x3D; 1M</p>
</li>
<li><p>来自机构的浏览器的平均请求 &#x3D; 15个&#x2F;sec</p>
</li>
<li><p>从机构路由器到任何起始服务器并返回的时延 &#x3D; 2 sec</p>
</li>
</ul>
<p>则</p>
<p>LAN端每秒发送15M请求，由于LAN信道宽度为100Mbps，访问链路信道宽度为15Mbps，故</p>
<ul>
<li><p>局域网利用率 &#x3D; 15%</p>
</li>
<li><p>访问链路利用率 &#x3D; 100%</p>
</li>
<li><p>总时延  &#x3D; LAN时延 + 访问时延 + 因特网时延 &#x3D; LAN时延 + 访问链路时延 + 2sec</p>
</li>
</ul>
<h3 id="有缓存服务器时"><a href="#有缓存服务器时" class="headerlink" title="有缓存服务器时"></a>有缓存服务器时</h3><pre class="mermaid">graph LR

LAN(LAN 100Mbps)

LANroute[机构路由器]

A[浏览器A] --- LANroute
B[浏览器B] --> LANroute
C[浏览器C] --> LANroute
D((缓存服务器)) --> LANroute

WANroute[公网路由器]

LANroute -.访问链路 15Mbps.-> WANroute

WANroute --> a[起始服务器a]
WANroute --> b[起始服务器b]
WANroute --> c[起始服务器c]</pre>

<p>假设命中率为0.4</p>
<ul>
<li><p>40%请求几乎立即得到满足，没有到达起始服务器的时延<br>60%请求由起始服务器满足</p>
</li>
<li><p>访问链路的利用率减少到60%</p>
</li>
</ul>
<p>网络平均时延大大减小</p>
<h2 id="条件GET"><a href="#条件GET" class="headerlink" title="条件GET"></a>条件GET</h2><p>HTTP条件Get使用的方法：</p>
<p>客户端向服务器发送一个包询问是否在上一次访问网站的时间后是否更改了页面</p>
<ul>
<li><p>如果服务器没有更新，不需要重新传输网页，返回304 Not Modified，客户端使用本地缓存</p>
</li>
<li><p>如果服务器对照客户端给出的时间已经更新了客户端请求的网页，则发送更新了的网页给用户。</p>
</li>
</ul>
<hr>
<h1 id="文件传输协议：FTP"><a href="#文件传输协议：FTP" class="headerlink" title="文件传输协议：FTP"></a>文件传输协议：FTP</h1><p>FTP使用双tcp连接</p>
<ul>
<li><p>第一个是控制连接，它一直持续到客户进程与服务器进程之间的会话完成为止。</p>
</li>
<li><p>另一个是数据连接，按需可以随时创建和撤消。每当一个文件传输时，就创建一个数据连接。</p>
</li>
</ul>
<p>控制连接被称为主连接。而数据连接被称为子连接。</p>
<pre class="mermaid">graph LR

local[本地主机] --TCP控制连接 默认端口21--> remote[远程主机]

remote[远程主机] --TCP数据连接 默认端口20--> local[本地主机]</pre>

<p>通过操作命令实现远程交互式访问。</p>
<hr>
<h1 id="电子邮件"><a href="#电子邮件" class="headerlink" title="电子邮件"></a>电子邮件</h1><h2 id="电子邮件系统组成"><a href="#电子邮件系统组成" class="headerlink" title="电子邮件系统组成:"></a>电子邮件系统组成:</h2><ul>
<li><p>用户代理</p>
</li>
<li><p>邮件服务器</p>
</li>
<li><p>简单邮件传输协议: SMTP（Simple Mail Transfer Protocol）</p>
</li>
</ul>
<pre class="mermaid">graph TD

MSA[邮件服务器A]
MSB[邮件服务器B]
MSC[邮件服务器C]

MSA --SMTP--> MSB
MSB --SMTP---> MSC
MSC --SMTP--> MSA

A[用户代理] -.-> MSA

B[用户代理] -.-> MSB
C[用户代理] -.-> MSB

MSC <-.- D[用户代理]
MSC <-.- E[用户代理]
MSC <-.- F[用户代理]</pre>
<p>Alice向Bob写信</p>
<ol>
<li>Alice<strong>使用UA写作报文</strong>并向 <a href="mailto:&#x62;&#111;&#x62;&#64;&#x73;&#x6f;&#109;&#x65;&#x73;&#x63;&#x68;&#111;&#111;&#x6c;&#46;&#x65;&#100;&#x75;">&#x62;&#111;&#x62;&#64;&#x73;&#x6f;&#109;&#x65;&#x73;&#x63;&#x68;&#111;&#111;&#x6c;&#46;&#x65;&#100;&#x75;</a>发送</li>
<li>Alice的UA向其<strong>邮件服务器</strong>发送报文；报文放置在<strong>报文队列</strong>中</li>
<li><strong>SMTP</strong>的客户机侧打开与Bob的邮件服务器的<strong>TCP连接</strong></li>
<li>SMTP通过TCP连接<strong>发送</strong>Alice的报文</li>
<li>Bob的邮件服务器将该报文<strong>放入Bob的邮箱</strong></li>
<li>Bob<strong>调用其用户代理</strong>来读报文</li>
</ol>
<pre class="mermaid">graph LR

Alice === A[用户代理] --> B[邮件服务器] -.-> C[邮件服务器] --> D[用户代理] === Bob</pre>

<h2 id="电子邮件协议"><a href="#电子邮件协议" class="headerlink" title="电子邮件协议"></a>电子邮件协议</h2><ul>
<li><p>SMTP（简单邮件传输协议）：最常用的电子邮件传输协议</p>
</li>
<li><p>POP3（邮局协议）：最常用的电子邮件接收协议</p>
</li>
<li><p>IMAP4（网络邮局访问协议）：POP3的替代协议，提供邮件处理新功能</p>
</li>
</ul>
<p>另：HTTP协议也用于电子邮件，网页访问邮箱</p>
<h2 id="STMP"><a href="#STMP" class="headerlink" title="STMP"></a>STMP</h2><ul>
<li><p>SMTP是一个相对简单的基于文本的协议</p>
<ul>
<li><p>报文必须以7比特ASCII格式</p>
</li>
<li><p>二进值文件可通过MIME编码后再传</p>
</li>
</ul>
</li>
<li><p>SMTP服务器端使用端口号25</p>
</li>
<li><p>采用命令&#x2F;响应交互</p>
<ul>
<li><p>命令：HELO，MAIL FROM, RCPT TO, DATA, QUIT</p>
</li>
<li><p>响应：状态码及短语</p>
</li>
</ul>
</li>
<li><p>传输的三个阶段</p>
<p>  握手，传输，关闭</p>
</li>
</ul>
<h2 id="邮件报文格式"><a href="#邮件报文格式" class="headerlink" title="邮件报文格式"></a>邮件报文格式</h2><ul>
<li><p>首部</p>
<p>  头部由多个头部行构成，列出最常见的三个</p>
<ul>
<li><p>To：发给谁</p>
</li>
<li><p>From：谁发送的</p>
</li>
<li><p>Subject：邮件的主题</p>
</li>
</ul>
</li>
<li><p>空行</p>
</li>
<li><p>信体</p>
</li>
</ul>
<h2 id="MIME"><a href="#MIME" class="headerlink" title="MIME"></a>MIME</h2><p>多用途因特网邮件扩展不仅可以发送非英语国家字符，还可以发送其它类型的内容，例如声音、图像、图片、视频等，大大扩展了电子邮件的用途。</p>
<p>MIME通过添加额外的信头头部声明来实现内容的扩展。以下为一个例子：</p>
<p><img src="https://s2.loli.net/2022/05/10/Txz9sbuaXABdUD8.png" alt="MIME头部.png" loading="lazy"></p>
<pre class="mermaid">graph LR

用户1 --非ASCII码--- A[MIME] --七位ASCII码--- B[SMTP] --七位ASCII码--- C[SMTP] --七位ASCII码--- D[MIME] --非ASCII码--- 用户2</pre>

<h2 id="邮件访问协议"><a href="#邮件访问协议" class="headerlink" title="邮件访问协议"></a>邮件访问协议</h2><p>邮件访问协议用来从邮件服务器上读取别人发来的邮件</p>
<pre class="mermaid">graph LR

用户代理1 --SMTP--- A[邮件服务器] --SMTP--- D[邮件服务器] --邮件访问协议--- 用户代理2</pre>

<ul>
<li><p>POP3: 邮局协议 （ Post Office Protocol ）</p>
<p>  授权 (代理 &lt;–&gt;服务器) 并下载</p>
</li>
<li><p>IMAP4: 因特网邮件访问协议 </p>
<ul>
<li><p>更多功能</p>
</li>
<li><p>操作存储在服务器上的报文</p>
</li>
</ul>
</li>
</ul>
<h2 id="基于Web的电子邮件"><a href="#基于Web的电子邮件" class="headerlink" title="基于Web的电子邮件"></a>基于Web的电子邮件</h2><ul>
<li><p>用户代理是浏览器</p>
</li>
<li><p>使用 HTTP而不是SMTP发送到<strong>源</strong>邮件服务器</p>
</li>
<li><p>使用SMTP发送邮件到<strong>目的</strong>邮件服务器</p>
</li>
</ul>
<hr>
<h1 id="域名系统DNS"><a href="#域名系统DNS" class="headerlink" title="域名系统DNS"></a>域名系统DNS</h1><p>DNS: Domain Name System域名系统</p>
<p>包括DNS服务器和DNS协议</p>
<p>DNS完成主机名到IP地址的解析</p>
<ul>
<li><p>迭代查询</p>
<ul>
<li>客户端向本地DNS服务器发起查询:请求gaia.cs.umass.edu的IP</li>
<li>本地DNS向根DNS查询：.edu顶级域DNS服务器地址</li>
<li>根DNS回应.edu顶级域DNS服务器地址</li>
<li>本地DNS向.edu顶级域DNS查询.umass.edu的权威DNS服务器地址</li>
</ul>
<p>  <img src="https://s2.loli.net/2022/05/10/sMiQAPv9R25zUVa.png" alt="DNS迭代查询.png" loading="lazy"></p>
</li>
<li><p>递归查询</p>
<ul>
<li>客户端向本地DNS服务器发起查询:请求gaia.cs.umass.edu的IP</li>
<li>本地DNS向根DNS查询：请求gaia.cs.umass.edu的IP</li>
<li>根DNS向.edu顶级域DNS服务器查询：请求gaia.cs.umass.edu的IP</li>
<li>.edu顶级域DNS向.umass.edu的权威DNS查询：</li>
</ul>
<p>  <img src="https://s2.loli.net/2022/05/10/Ipdq7yai9YWFbgs.png" alt="DNS递归查询.png" loading="lazy"></p>
</li>
</ul>
</div></section><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>绮罗传香</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="http://sagirichan.com/2022/05/13/computer-network-note-applicationLayer/" title="计网复习笔记-应用层">http://sagirichan.com/2022/05/13/computer-network-note-applicationLayer/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> 许可协议。</li></ul></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2022/06/12/computer-network-note-transportLayer/" rel="prev" title="计网复习笔记-传输层"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">计网复习笔记-传输层</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2022/05/13/computer-network-note-introduction/" rel="next" title="计网复习笔记-绪论"><span class="post-nav-text">计网复习笔记-绪论</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>此博客未支持评论系统，欢迎点击下方按钮，前往本站仓库提出issue</span><br><a class="hty-button hty-button--raised" id="github-issues" target="_blank" rel="noopener" href="https://github.com/Ireinasan/ireinasan.github.io/issues?q=is:issue+计网复习笔记-应用层">GitHub Issues</a></div></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2022 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> 绮罗传香</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v6.2.0</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.9.1</span></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="搜索"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="/js/search/local-search.js" defer type="module"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="搜索..." value=""></div><div id="local-search-result"></div></div></div></body></html>