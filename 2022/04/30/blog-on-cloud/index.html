<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="绮罗传香"><meta name="copyright" content="绮罗传香"><meta name="generator" content="Hexo 5.4.1"><meta name="theme" content="hexo-theme-yun"><title>如何把博客部署在云服务器上？ | 绮罗传香度良辰</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.2.4/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><script src="https://cdn.jsdelivr.net/npm/@unocss/runtime/mini.global.js"></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"sagirichan.com","root":"/","title":"绮罗传香度良辰","version":"1.7.0","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}.","hits":"${hits} results found","hits_time":"${hits} results found in ${time} ms"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><meta name="description" content="前言在我的另一篇文章关于我想要拥有自己的网站这件事中，我搭建了一个基于GitHub Pages的博客网站，并且备案成功，为网站迁移做好了前期准备。 本来这篇文章我是与上面那篇合在一起写的，然而，由于网上教程的不完善以及我的猪鼻，我搞了好久才成功把网站部署到了服务器上，期间踩了无数稀奇古怪的坑，跟随着部署过程一起写的这篇文章也随之变得冗长臃肿，于是我认为这么屑的部署过程有必要单开一帖记录。  参考">
<meta property="og:type" content="article">
<meta property="og:title" content="如何把博客部署在云服务器上？">
<meta property="og:url" content="http://sagirichan.com/2022/04/30/blog-on-cloud/index.html">
<meta property="og:site_name" content="绮罗传香度良辰">
<meta property="og:description" content="前言在我的另一篇文章关于我想要拥有自己的网站这件事中，我搭建了一个基于GitHub Pages的博客网站，并且备案成功，为网站迁移做好了前期准备。 本来这篇文章我是与上面那篇合在一起写的，然而，由于网上教程的不完善以及我的猪鼻，我搞了好久才成功把网站部署到了服务器上，期间踩了无数稀奇古怪的坑，跟随着部署过程一起写的这篇文章也随之变得冗长臃肿，于是我认为这么屑的部署过程有必要单开一帖记录。  参考">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://s2.loli.net/2022/04/29/gmZ6RErIefAU9Wo.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/30/Rw7zbuLlJ3IOK8Z.png">
<meta property="og:image" content="https://s2.loli.net/2022/04/30/ES9At32dGJZNsjQ.png">
<meta property="og:image" content="https://s2.loli.net/2022/05/01/URreFvp7zLquGbX.png">
<meta property="og:image" content="https://s2.loli.net/2022/05/01/fBLxY8jW3vz2lRi.png">
<meta property="article:published_time" content="2022-04-30T05:20:46.000Z">
<meta property="article:modified_time" content="2022-05-13T09:30:30.308Z">
<meta property="article:author" content="绮罗传香">
<meta property="article:tag" content="hexo">
<meta property="article:tag" content="nginx">
<meta property="article:tag" content="git">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2022/04/29/gmZ6RErIefAU9Wo.png"><script src="/js/ui/mode.js"></script><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="Table of Contents"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="Overview"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info mickey-mouse"><a class="site-author-avatar" href="/about/" title="绮罗传香"><img width="96" loading="lazy" src="https://avatars.githubusercontent.com/u/87757744?v=4" alt="绮罗传香"><span class="site-author-status" title="永远相信美好的事情即将发生">:-)</span></a><div class="site-author-name"><a href="/about/">绮罗传香</a></div><span class="site-name">绮罗传香度良辰</span><sub class="site-subtitle">枕惯蹄声梦不惊</sub><div class="site-desciption">lovely sagiri</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="Home"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="Archives"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">11</span></a></div><div class="site-state-item"><a href="/categories/" title="Categories"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">0</span></a></div><div class="site-state-item"><a href="/tags/" title="Tags"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">3</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="文档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/Ireinasan" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=608906376" title="网易云音乐" target="_blank" style="color:#C20C0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/428379308" title="哔哩哔哩" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="我的小伙伴们" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%B2%E4%B8%80%E8%AE%B2%E6%95%B4%E4%BD%93%E6%80%9D%E8%B7%AF"><span class="toc-number">1.</span> <span class="toc-text">讲一讲整体思路</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E8%A6%81%E5%81%9A%E5%93%AA%E4%BA%9B%E5%87%86%E5%A4%87%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">本地要做哪些准备？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%91%E7%AB%AF%E8%A6%81%E5%81%9A%E4%BA%9B%E4%BB%80%E4%B9%88"><span class="toc-number">1.2.</span> <span class="toc-text">云端要做些什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%98%E6%9C%89%E5%88%AB%E7%9A%84%E5%90%97"><span class="toc-number">1.3.</span> <span class="toc-text">还有别的吗</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B%E5%B9%B2%E6%B4%BB"><span class="toc-number">2.</span> <span class="toc-text">开始干活</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0"><span class="toc-number">2.1.</span> <span class="toc-text">本地</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">2.2.</span> <span class="toc-text">服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#nginx"><span class="toc-number">2.2.1.</span> <span class="toc-text">nginx</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%99%E7%A8%8B%E9%87%8C%E9%83%BD%E5%86%99%E8%BF%99%E4%B8%AA%E7%9B%AE%E5%BD%95%EF%BC%8C%E8%99%BD%E7%84%B6%E4%B8%8D%E7%9F%A5%E9%81%93%E6%98%AF%E5%90%A6%E6%9C%89%E4%BB%80%E4%B9%88%E6%B7%B1%E6%84%8F%EF%BC%8C%E4%BD%86%E8%BF%98%E6%98%AF%E8%B7%9F%E7%9D%80%E5%81%9A%E4%BA%86"><span class="toc-number">3.</span> <span class="toc-text">教程里都写这个目录，虽然不知道是否有什么深意，但还是跟着做了</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#p-%E7%A1%AE%E4%BF%9D%E7%9B%AE%E5%BD%95%E5%90%8D%E7%A7%B0%E5%AD%98%E5%9C%A8%EF%BC%8C%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E5%B0%B1%E5%BB%BA%E4%B8%80%E4%B8%AA%E3%80%82"><span class="toc-number">4.</span> <span class="toc-text">-p 确保目录名称存在，不存在的就建一个。</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%99%E9%87%8C%E7%9A%84-USER%E5%A1%AB%E7%94%A8%E6%88%B7%E5%90%8D"><span class="toc-number">5.</span> <span class="toc-text">这里的$USER填用户名</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%99%E9%87%8C%E6%88%91%E4%BD%BF%E7%94%A8%E7%9A%84%E6%98%AF%E8%85%BE%E8%AE%AF%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8ubuntu%E5%AE%9E%E4%BE%8B%E7%9A%84%E9%BB%98%E8%AE%A4%E7%94%A8%E6%88%B7%E5%90%8Dubuntu"><span class="toc-number">6.</span> <span class="toc-text">这里我使用的是腾讯云服务器ubuntu实例的默认用户名ubuntu</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%A0%E6%AD%A4%E8%BF%99%E9%87%8C%E6%88%91%E6%98%AF%E8%BF%99%E6%A0%B7%E5%86%99%E7%9A%84%EF%BC%9Achown-R-ubuntu-ubuntu-var-repo"><span class="toc-number">7.</span> <span class="toc-text">因此这里我是这样写的：chown -R ubuntu:ubuntu &#x2F;var&#x2F;repo&#x2F;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BD%93%E7%84%B6%E4%B9%9F%E6%9C%89%E6%95%99%E7%A8%8B%E6%98%AF%E5%BB%BA%E7%AB%8B%E4%BA%86%E4%B8%80%E4%B8%AAgit%E7%94%A8%E6%88%B7%EF%BC%8C%E8%BF%99%E6%A0%B7%E6%9B%B4%E8%A7%84%E8%8C%83%EF%BC%8C%E4%B9%9F%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8"><span class="toc-number">8.</span> <span class="toc-text">当然也有教程是建立了一个git用户，这样更规范，也推荐使用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#R%E5%8F%82%E6%95%B0%E8%A1%A8%E7%A4%BA%E9%80%92%E5%BD%92%E5%A4%84%E7%90%86%EF%BC%8C%E5%B0%86%E6%8C%87%E5%AE%9A%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E6%89%80%E6%9C%89%E6%96%87%E4%BB%B6%E5%8F%8A%E5%AD%90%E7%9B%AE%E5%BD%95%E4%B8%80%E5%B9%B6%E5%A4%84%E7%90%86"><span class="toc-number">9.</span> <span class="toc-text">-R参数表示递归处理，将指定目录下的所有文件及子目录一并处理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#USER-USER%E4%B8%AD%EF%BC%8C%E5%89%8D%E4%B8%80%E4%B8%AAUSER%E6%98%AF%E6%8C%87%E7%94%A8%E6%88%B7%E5%90%8D%EF%BC%8C%E5%90%8E%E4%B8%80%E4%B8%AAUSER%E6%98%AF%E6%8C%87%E7%94%A8%E6%88%B7%E6%89%80%E5%B1%9E%E7%9A%84%E7%BE%A4%E7%BB%84"><span class="toc-number">10.</span> <span class="toc-text">USER:USER中，前一个USER是指用户名，后一个USER是指用户所属的群组</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#chmod-755-%E8%AE%BE%E7%BD%AE%E7%94%A8%E6%88%B7%E7%9A%84%E6%9D%83%E9%99%90%E4%B8%BA%EF%BC%9A"><span class="toc-number">11.</span> <span class="toc-text">chmod 755 设置用户的权限为：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E6%96%87%E4%BB%B6%E6%89%80%E6%9C%89%E8%80%85%E5%8F%AF%E8%AF%BB%E5%8F%AF%E5%86%99%E5%8F%AF%E6%89%A7%E8%A1%8C"><span class="toc-number">12.</span> <span class="toc-text">1.文件所有者可读可写可执行</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E4%B8%8E%E6%96%87%E4%BB%B6%E6%89%80%E6%9C%89%E8%80%85%E5%90%8C%E5%B1%9E%E4%B8%80%E4%B8%AA%E7%94%A8%E6%88%B7%E7%BB%84%E7%9A%84%E5%85%B6%E4%BB%96%E7%94%A8%E6%88%B7%E5%8F%AF%E8%AF%BB%E5%8F%AF%E6%89%A7%E8%A1%8C"><span class="toc-number">13.</span> <span class="toc-text">2.与文件所有者同属一个用户组的其他用户可读可执行</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E5%85%B6%E5%AE%83%E7%94%A8%E6%88%B7%E7%BB%84%E5%8F%AF%E8%AF%BB%E5%8F%AF%E6%89%A7%E8%A1%8C"><span class="toc-number">14.</span> <span class="toc-text">3.其它用户组可读可执行</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#git"><span class="toc-number">14.0.1.</span> <span class="toc-text">git</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%99%E9%87%8C%E7%9B%AE%E5%BD%95%E6%89%80%E6%9C%89%E8%80%85%E4%B8%8E%E4%B8%8A%E6%96%87nginx%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%E6%89%80%E6%9C%89%E8%80%85%E7%9B%B8%E5%90%8C%EF%BC%8C%E6%88%91%E6%98%AFubuntu"><span class="toc-number">15.</span> <span class="toc-text">这里目录所有者与上文nginx静态文件目录所有者相同，我是ubuntu.</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0%EF%BC%9Agit-init-%E4%B8%8Egit-init-%E2%80%94bare"><span class="toc-number">16.</span> <span class="toc-text">参考文章：git init 与git init —bare</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-post-receive%E6%9C%BA%E5%88%B6%EF%BC%9A%E8%BF%99%E4%B8%AAhook%E6%98%AFgit%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9C%A8%E5%8F%97%E5%88%B0push%E8%AF%B7%E6%B1%82%E6%97%B6%EF%BC%8C%E5%B9%B6%E4%B8%94%E6%8E%A5%E5%8F%97%E5%AE%8C%E4%BB%A3%E7%A0%81%E6%8F%90%E4%BA%A4%E6%97%B6%E8%A7%A6%E5%8F%91"><span class="toc-number">17.</span> <span class="toc-text">git post-receive机制：这个hook是git服务器在受到push请求时，并且接受完代码提交时触发</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83%EF%BC%9A%E4%BD%BF%E7%94%A8git-hooks-post-receive-%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84%E8%BF%9C%E7%A8%8B%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2"><span class="toc-number">18.</span> <span class="toc-text">参考：使用git hooks(post-receive)实现简单的远程自动部署</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%8D%E4%BC%9A%E7%94%A8vim%E5%8F%AF%E4%BB%A5%E7%9C%8B%E4%B8%80%E7%9C%8B%E7%AE%80%E5%8D%95%E6%8C%87%E4%BB%A4-gt-Linux-vi-vim"><span class="toc-number">19.</span> <span class="toc-text">不会用vim可以看一看简单指令-&gt;Linux vi&#x2F;vim</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0%EF%BC%9A"><span class="toc-number">20.</span> <span class="toc-text">参考文章：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0%EF%BC%9Achmod-x%EF%BC%8C%E8%B5%8B%E4%BA%88%E2%80%9C%E5%8F%AF%E6%89%A7%E8%A1%8C%E2%80%9D%E6%9D%83%E9%99%90"><span class="toc-number">21.</span> <span class="toc-text">参考文章：chmod +x，赋予“可执行”权限</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E4%B8%8E%E4%BA%91%E7%AB%AF%E5%BB%BA%E7%AB%8BSSH%E8%BF%9E%E6%8E%A5"><span class="toc-number">21.1.</span> <span class="toc-text">本地与云端建立SSH连接</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%AE%B2%E8%A7%A3%E8%A7%81%E4%B8%8A%E6%96%87"><span class="toc-number">22.</span> <span class="toc-text">命令讲解见上文</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9hexo%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">22.1.</span> <span class="toc-text">修改hexo配置文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%87%E4%BA%8B%E4%BF%B1%E5%A4%87"><span class="toc-number">23.</span> <span class="toc-text">万事俱备</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#g%E6%98%AFgeneration%EF%BC%8C%E7%94%9F%E6%88%90%E7%BD%91%E9%A1%B5%E6%96%87%E4%BB%B6"><span class="toc-number">24.</span> <span class="toc-text">g是generation，生成网页文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#d%E6%98%AFdeploy%EF%BC%8C%E5%8F%91%E5%B8%83%E7%BD%91%E7%AB%99%E3%80%82%E5%AE%9E%E9%99%85%E4%B8%8Adeploy%E5%91%BD%E4%BB%A4%E6%98%AF%E5%B0%86%E7%BD%91%E9%A1%B5%E6%96%87%E4%BB%B6%E6%8E%A8%E9%80%81%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E4%B8%AD%E3%80%82%E5%8F%82%E8%80%83%E8%BF%99%E4%B8%80%E5%88%87%E6%98%AF%E5%A6%82%E4%BD%95%E5%8F%91%E7%94%9F%E7%9A%84%EF%BC%9F%E3%80%82"><span class="toc-number">25.</span> <span class="toc-text">d是deploy，发布网站。实际上deploy命令是将网页文件推送到远程仓库中。参考这一切是如何发生的？。</span></a></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="http://sagirichan.com/2022/04/30/blog-on-cloud/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="绮罗传香"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="绮罗传香度良辰"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">如何把博客部署在云服务器上？</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="Created: 2022-04-30 13:20:46" itemprop="dateCreated datePublished" datetime="2022-04-30T13:20:46+08:00">2022-04-30</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <time title="Modified: 2022-05-13 17:30:30" itemprop="dateModified" datetime="2022-05-13T17:30:30+08:00">2022-05-13</time></div><div class="post-classify"><span class="post-tag"><a class="tag-item" href="/tags/hexo/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">hexo</span></a><a class="tag-item" href="/tags/nginx/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">nginx</span></a><a class="tag-item" href="/tags/git/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">git</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><blockquote>
<p>前言<br>在我的另一篇文章<a href="http://sagirichan.com/2022/01/25/my-own-website/">关于我想要拥有自己的网站这件事</a>中，我搭建了一个基于<a target="_blank" rel="noopener" href="https://pages.github.com/">GitHub Pages</a>的博客网站，并且备案成功，为网站迁移做好了前期准备。</p>
<p>本来这篇文章我是与上面那篇合在一起写的，然而，由于网上教程的不完善<del>以及我的猪鼻</del>，我搞了好久才成功把网站部署到了服务器上，期间踩了无数稀奇古怪的坑，跟随着部署过程一起写的这篇文章也随之变得冗长臃肿，于是我认为这么屑的部署过程有必要单开一帖记录。</p>
</blockquote>
<p>参考文章：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/TyCoding/article/details/80480541">Nginx搭建基于Hexo的Blog</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/shuqinkissshot/article/details/123201682">基于Hexo+Nginx+Git在云服务器上搭建个人网站</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/kengkeng123qwe/article/details/124471586">【hexo博客搭建】将搭建好的hexo博客部署到阿里云服务器上面(下)</a></p>
<h1 id="讲一讲整体思路"><a href="#讲一讲整体思路" class="headerlink" title="讲一讲整体思路"></a>讲一讲整体思路</h1><p>很多教程都有个共同的问题，就是只讲要做什么，而不讲为什么做。这就导致读者读完教程后知其然而不知其所以然，甚至对于一些粗制滥造胡乱抄袭的教程，读完以后连其所以然都不知。</p>
<p>所以我想在我的博客的开头简单介绍一下部署的思路，让读者（如果有的话）在后续的部署过程中能明白自己在干什么，而不是如盲人摸象一般被动地跟着教程模仿，出了问题都不知道出在哪。这对我自己来说也是重新审视知识的过程。</p>
<p><del>当然读者也可以直接跳过这一部分，这并不会影响部署结果。</del></p>
<h2 id="本地要做哪些准备？"><a href="#本地要做哪些准备？" class="headerlink" title="本地要做哪些准备？"></a>本地要做哪些准备？</h2><p>在本地配置hexo并生成<code>网站静态文件</code>，生成的静态文件将通过<code>git</code>工具推送到服务器（或github等任意我们想要部署到的地方）。</p>
<h2 id="云端要做些什么"><a href="#云端要做些什么" class="headerlink" title="云端要做些什么"></a>云端要做些什么</h2><p>在云端我们做了两个工作：</p>
<ul>
<li><p>部署nginx，它将帮助你把网站的静态文件变成可以访问的网站。</p>
</li>
<li><p>安装git（对于云服务器来说这一步通常已经完成了），建立一个git仓库，用来接收从本地推送的网站静态文件，并利用<code>hook</code>（钩子）工具将其转移到nginx的托管目录下。</p>
</li>
</ul>
<h2 id="还有别的吗"><a href="#还有别的吗" class="headerlink" title="还有别的吗"></a>还有别的吗</h2><p>建立云服务器与本地的SSH连接，这样我们在使用git向服务器推送网站静态文件时就不必每次都要输入云服务器的用户密码了，可以和向github推送代码一样直接。</p>
<h1 id="开始干活"><a href="#开始干活" class="headerlink" title="开始干活"></a>开始干活</h1><h2 id="本地"><a href="#本地" class="headerlink" title="本地"></a>本地</h2><p><a href="http://sagirichan.com/2022/01/25/my-own-website/">关于我想要拥有自己的网站这件事</a></p>
<h2 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h2><h3 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h3><p>安装nginx</p>
<blockquote>
<p>apt install nginx</p>
</blockquote>
<p>查看nginx版本</p>
<blockquote>
<p>nginx -v</p>
</blockquote>
<p>启动nginx</p>
<blockquote>
<p>service nginx start</p>
</blockquote>
<p>在浏览器输入服务器的公网IP便可以看到nginx的欢迎页面。</p>
<p><img src="https://s2.loli.net/2022/04/29/gmZ6RErIefAU9Wo.png" alt="welcome-to-nginx.png" loading="lazy"></p>
<p>为nginx创建用来存放网站静态文件的文件夹</p>
<blockquote>
<p>mkdir -p /var/www/hexo </p>
<h1 id="教程里都写这个目录，虽然不知道是否有什么深意，但还是跟着做了"><a href="#教程里都写这个目录，虽然不知道是否有什么深意，但还是跟着做了" class="headerlink" title="教程里都写这个目录，虽然不知道是否有什么深意，但还是跟着做了"></a>教程里都写这个目录，虽然不知道是否有什么深意，但还是跟着做了</h1><h1 id="p-确保目录名称存在，不存在的就建一个。"><a href="#p-确保目录名称存在，不存在的就建一个。" class="headerlink" title="-p 确保目录名称存在，不存在的就建一个。"></a>-p 确保目录名称存在，不存在的就建一个。</h1></blockquote>
<p>修改目录所有者</p>
<blockquote>
<p>chown -R <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex" xmlns="http://www.w3.org/2000/svg" width="7.898ex" height="1.645ex" role="img" focusable="false" viewBox="0 -705 3490.8 727"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D448" d="M107 637Q73 637 71 641Q70 643 70 649Q70 673 81 682Q83 683 98 683Q139 681 234 681Q268 681 297 681T342 682T362 682Q378 682 378 672Q378 670 376 658Q371 641 366 638H364Q362 638 359 638T352 638T343 637T334 637Q295 636 284 634T266 623Q265 621 238 518T184 302T154 169Q152 155 152 140Q152 86 183 55T269 24Q336 24 403 69T501 205L552 406Q599 598 599 606Q599 633 535 637Q511 637 511 648Q511 650 513 660Q517 676 519 679T529 683Q532 683 561 682T645 680Q696 680 723 681T752 682Q767 682 767 672Q767 650 759 642Q756 637 737 637Q666 633 648 597Q646 592 598 404Q557 235 548 205Q515 105 433 42T263 -22Q171 -22 116 34T60 167V183Q60 201 115 421Q164 622 164 628Q164 635 107 637Z"></path></g><g data-mml-node="mi" transform="translate(767,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mi" transform="translate(1412,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"></path></g><g data-mml-node="mi" transform="translate(2176,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g><g data-mml-node="mo" transform="translate(3212.8,0)"><path data-c="3A" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path></g></g></g></svg></mjx-container>USER /var/www/hexo </p>
<h1 id="这里的-USER填用户名"><a href="#这里的-USER填用户名" class="headerlink" title="这里的$USER填用户名"></a>这里的$USER填<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/105482468">用户名</a></h1><h1 id="这里我使用的是腾讯云服务器ubuntu实例的默认用户名ubuntu"><a href="#这里我使用的是腾讯云服务器ubuntu实例的默认用户名ubuntu" class="headerlink" title="这里我使用的是腾讯云服务器ubuntu实例的默认用户名ubuntu"></a>这里我使用的是腾讯云服务器ubuntu实例的默认用户名<code>ubuntu</code></h1><h1 id="因此这里我是这样写的：chown-R-ubuntu-ubuntu-var-repo"><a href="#因此这里我是这样写的：chown-R-ubuntu-ubuntu-var-repo" class="headerlink" title="因此这里我是这样写的：chown -R ubuntu:ubuntu /var/repo/"></a>因此这里我是这样写的：chown -R ubuntu:ubuntu /var/repo/</h1><h1 id="当然也有教程是建立了一个git用户，这样更规范，也推荐使用"><a href="#当然也有教程是建立了一个git用户，这样更规范，也推荐使用" class="headerlink" title="当然也有教程是建立了一个git用户，这样更规范，也推荐使用"></a>当然也有教程是建立了一个git用户，这样更规范，也推荐使用</h1><h1 id="R参数表示递归处理，将指定目录下的所有文件及子目录一并处理"><a href="#R参数表示递归处理，将指定目录下的所有文件及子目录一并处理" class="headerlink" title="-R参数表示递归处理，将指定目录下的所有文件及子目录一并处理"></a><code>-R</code>参数表示递归处理，将指定目录下的所有文件及子目录一并处理</h1><h1 id="USER-USER中，前一个USER是指用户名，后一个USER是指用户所属的群组"><a href="#USER-USER中，前一个USER是指用户名，后一个USER是指用户所属的群组" class="headerlink" title="USER:USER中，前一个USER是指用户名，后一个USER是指用户所属的群组"></a><code>USER:USER</code>中，前一个USER是指用户名，后一个USER是指用户所属的群组</h1></blockquote>
<p>修改目录权限</p>
<blockquote>
<p>chmod -R 755 /var/www/hexo</p>
<h1 id="chmod-755-设置用户的权限为："><a href="#chmod-755-设置用户的权限为：" class="headerlink" title="chmod 755 设置用户的权限为："></a>chmod 755 设置用户的权限为：</h1><h1 id="1-文件所有者可读可写可执行"><a href="#1-文件所有者可读可写可执行" class="headerlink" title="1.文件所有者可读可写可执行"></a>1.文件所有者可读可写可执行</h1><h1 id="2-与文件所有者同属一个用户组的其他用户可读可执行"><a href="#2-与文件所有者同属一个用户组的其他用户可读可执行" class="headerlink" title="2.与文件所有者同属一个用户组的其他用户可读可执行"></a>2.与文件所有者同属一个用户组的其他用户可读可执行</h1><h1 id="3-其它用户组可读可执行"><a href="#3-其它用户组可读可执行" class="headerlink" title="3.其它用户组可读可执行"></a>3.其它用户组可读可执行</h1></blockquote>
<p>修改Nginx的<code>default</code>文件使得<code>root</code>指向刚刚创建的<code>/var/www/hexo</code>目录：</p>
<blockquote>
<p>vim /etc/nginx/sites-available/default</p>
</blockquote>
<p>在server大括号中，添加如图所示的一句话：</p>
<blockquote>
<p>root /var/www/hexo;</p>
</blockquote>
<p><img src="https://s2.loli.net/2022/04/30/Rw7zbuLlJ3IOK8Z.png" alt="修改nginx的default文件.png" loading="lazy"></p>
<p>重启nginx服务。</p>
<blockquote>
<p>service nginx restart</p>
</blockquote>
<h3 id="git"><a href="#git" class="headerlink" title="git"></a>git</h3><p>建立一个git仓库目录</p>
<blockquote>
<p>mkdir /var/repo/ </p>
</blockquote>
<p>修改目录权限</p>
<blockquote>
<p>chown -R <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex" xmlns="http://www.w3.org/2000/svg" width="7.898ex" height="1.645ex" role="img" focusable="false" viewBox="0 -705 3490.8 727"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D448" d="M107 637Q73 637 71 641Q70 643 70 649Q70 673 81 682Q83 683 98 683Q139 681 234 681Q268 681 297 681T342 682T362 682Q378 682 378 672Q378 670 376 658Q371 641 366 638H364Q362 638 359 638T352 638T343 637T334 637Q295 636 284 634T266 623Q265 621 238 518T184 302T154 169Q152 155 152 140Q152 86 183 55T269 24Q336 24 403 69T501 205L552 406Q599 598 599 606Q599 633 535 637Q511 637 511 648Q511 650 513 660Q517 676 519 679T529 683Q532 683 561 682T645 680Q696 680 723 681T752 682Q767 682 767 672Q767 650 759 642Q756 637 737 637Q666 633 648 597Q646 592 598 404Q557 235 548 205Q515 105 433 42T263 -22Q171 -22 116 34T60 167V183Q60 201 115 421Q164 622 164 628Q164 635 107 637Z"></path></g><g data-mml-node="mi" transform="translate(767,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mi" transform="translate(1412,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"></path></g><g data-mml-node="mi" transform="translate(2176,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g><g data-mml-node="mo" transform="translate(3212.8,0)"><path data-c="3A" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path></g></g></g></svg></mjx-container>USER /var/repo/</p>
<h1 id="这里目录所有者与上文nginx静态文件目录所有者相同，我是ubuntu"><a href="#这里目录所有者与上文nginx静态文件目录所有者相同，我是ubuntu" class="headerlink" title="这里目录所有者与上文nginx静态文件目录所有者相同，我是ubuntu."></a>这里目录所有者与上文nginx静态文件目录所有者相同，我是<code>ubuntu</code>.</h1><p>chmod -R 755 /var/repo/</p>
</blockquote>
<p>将这个仓库初始化</p>
<blockquote>
<p>cd /var/repo<br>git init —bare hexoblog.git</p>
<h1 id="参考文章：git-init-与git-init-—bare"><a href="#参考文章：git-init-与git-init-—bare" class="headerlink" title="参考文章：git init 与git init —bare"></a>参考文章：<a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_34349564/article/details/52487860">git init 与git init —bare</a></h1></blockquote>
<p>配置hook（钩子）文件</p>
<blockquote>
<p>vim /var/repo/myblog.git/hooks/post-receive</p>
<h1 id="git-post-receive机制：这个hook是git服务器在受到push请求时，并且接受完代码提交时触发"><a href="#git-post-receive机制：这个hook是git服务器在受到push请求时，并且接受完代码提交时触发" class="headerlink" title="git post-receive机制：这个hook是git服务器在受到push请求时，并且接受完代码提交时触发"></a>git post-receive机制：这个hook是git服务器在受到push请求时，并且接受完代码提交时触发</h1><h1 id="参考：使用git-hooks-post-receive-实现简单的远程自动部署"><a href="#参考：使用git-hooks-post-receive-实现简单的远程自动部署" class="headerlink" title="参考：使用git hooks(post-receive)实现简单的远程自动部署"></a>参考：<a target="_blank" rel="noopener" href="https://www.imqianduan.com/git-svn/335.html">使用git hooks(post-receive)实现简单的远程自动部署</a></h1><h1 id="不会用vim可以看一看简单指令-gt-Linux-vi-vim"><a href="#不会用vim可以看一看简单指令-gt-Linux-vi-vim" class="headerlink" title="不会用vim可以看一看简单指令->Linux vi/vim"></a>不会用vim可以看一看简单指令-&gt;<a target="_blank" rel="noopener" href="https://www.runoob.com/linux/linux-vim.html">Linux vi/vim</a></h1></blockquote>
<p>打开文件后在其中输入：</p>
<pre><code>#!/bin/bash
git --work-tree=/var/www/hexo --git-dir=/var/repo/hexoblog.git checkout -f
</code></pre><blockquote>
<h1 id="参考文章："><a href="#参考文章：" class="headerlink" title="参考文章："></a>参考文章：</h1><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/Jerryshome/archive/2011/12/15/2289218.html">Git系列之二 —- git-dir &amp; work-tree</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44567318/article/details/110099081">git checkout 检出命令——自由切换分支&amp;恢复文件</a></p>
</blockquote>
<p>保存后修改权限</p>
<blockquote>
<p>chmod +x /var/repo/myblog.git/hooks/post-receive</p>
<h1 id="参考文章：chmod-x，赋予“可执行”权限"><a href="#参考文章：chmod-x，赋予“可执行”权限" class="headerlink" title="参考文章：chmod +x，赋予“可执行”权限"></a>参考文章：<a target="_blank" rel="noopener" href="https://blog.csdn.net/yzh_1346983557/article/details/92571987">chmod +x，赋予“可执行”权限</a></h1></blockquote>
<h2 id="本地与云端建立SSH连接"><a href="#本地与云端建立SSH连接" class="headerlink" title="本地与云端建立SSH连接"></a>本地与云端建立SSH连接</h2><ul>
<li><p>如果你注册过github，那你大概率曾经生成过公钥，查看（Windows）电脑是否有<code>C/Users/Administrator/.ssh/</code>文件夹，如果有的话，文件夹下<code>id_rsa.pub</code>就是你的公钥。</p>
<p>  P.S. Linux系统的公钥在<code>~/.ssh/id_rsa.pub</code>文件中。</p>
<p>  使用</p>
<blockquote>
<p>ssh-copy-id [用户名]@[云服务器IP]</p>
</blockquote>
<p>  向云服务器传送公钥。</p>
<p>  举个例子，假设我的云服务IP是<code>10.10.10.10</code>，我要向服务器上<code>sagiri</code>用户传送公钥，那么我就使用</p>
<blockquote>
<p>ssh-copy-id sagiri@10.10.10.10</p>
</blockquote>
<p>  指令。</p>
<p>  由于我们之前配置仓库时，<code>git仓库</code>的所有者和<code>nginx静态文件目录</code>的所有者我都填了<code>ubuntu</code>，所以这里的用户名当然也是<code>ubuntu</code>.</p>
<p>  这里需要输入一次用户密码。</p>
</li>
<li><p>如果电脑上没有<code>C/Users/Administrator/.ssh/</code>文件夹，那么就使用</p>
<blockquote>
<p>ssh-keygen</p>
</blockquote>
<p>  指令先生成一个公钥，然后再用</p>
<blockquote>
<p>ssh-copy-id [用户名]@[云服务器IP] </p>
<h1 id="命令讲解见上文"><a href="#命令讲解见上文" class="headerlink" title="命令讲解见上文"></a>命令讲解见上文</h1></blockquote>
<p>  传送公钥。</p>
</li>
</ul>
<h2 id="修改hexo配置文件"><a href="#修改hexo配置文件" class="headerlink" title="修改hexo配置文件"></a>修改hexo配置文件</h2><p>回到我们的本地，打开hexo文件夹下的<code>_config.yml</code>文件进行配置</p>
<ul>
<li><p>找到<code>url</code>字段，将其配置为</p>
<blockquote>
<p>url: <a href="http://[服务器IP|服务器网址]/">http://[服务器IP|服务器网址]/</a></p>
</blockquote>
<p>  举例：我的服务器公网IP为<code>101.33.208.50</code>，挂载在我的服务器上的域名为<code>sagirichan.com</code>，那么这里可以填</p>
<blockquote>
<p>url: <a target="_blank" rel="noopener" href="http://101.33.208.50/">http://101.33.208.50/</a></p>
</blockquote>
<p>  也可以填</p>
<blockquote>
<p>url: <a href="http://sagirichan.com/">http://sagirichan.com/</a></p>
</blockquote>
</li>
<li><p>找到<code>deploy</code>字段，参考下图进行配置：</p>
<p>  <img src="https://s2.loli.net/2022/04/30/ES9At32dGJZNsjQ.png" alt="deploy配置.png" loading="lazy"></p>
<p>  解释：</p>
<ul>
<li><p><code>type</code>字段是推送网页文件的方式，我们用的是git，所以这里填<code>git</code>.</p>
</li>
<li><p><code>repo</code>是代码仓库的位置，格式为</p>
<blockquote>
<p><code>仓库名称</code>: <code>仓库用户名</code>@<code>仓库位置</code></p>
</blockquote>
<p>  我使用了两个仓库，一个是我本次部署在云端的仓库，另一个是我在初学搭建网站时部署在github上的仓库。</p>
<p>  以云端仓库为例</p>
<ul>
<li><p><code>仓库名称</code>可以随便取，我的服务器来自腾讯云，所以我取名为<code>tencentCloud</code></p>
</li>
<li><p><code>仓库用户名</code>字段，由于部署时我设置的云端<code>git仓库</code>的所有者为<code>ubuntu</code>，所以这里也是<code>ubuntu</code>.</p>
</li>
<li><p><code>仓库位置</code>字段，即是之前部署时设置的仓库位置。</p>
<p>github仓库格式同理<del>而且搭建网站的教程百分之九十九都会讲这个的</del></p>
</li>
</ul>
</li>
<li><p>对于deploy字段，除了展示的关键词，还有<code>branch</code>、<code>message</code>等关键词可供选择<del>但是我嫌麻烦就没有继续深入研究了</del>。</p>
<p>  <img src="https://s2.loli.net/2022/05/01/URreFvp7zLquGbX.png" alt="deploy补充.png" loading="lazy"></p>
</li>
</ul>
</li>
</ul>
<h1 id="万事俱备"><a href="#万事俱备" class="headerlink" title="万事俱备"></a>万事俱备</h1><p>在hexo文件夹下打开终端（vscode、power shell、git bash等等任意终端），输入<code>hexo三连</code>：</p>
<blockquote>
<p>hexo clean<br>hexo g<br>hexo d</p>
<h1 id="g是generation，生成网页文件"><a href="#g是generation，生成网页文件" class="headerlink" title="g是generation，生成网页文件"></a>g是generation，生成网页文件</h1><h1 id="d是deploy，发布网站。实际上deploy命令是将网页文件推送到远程仓库中。参考这一切是如何发生的？。"><a href="#d是deploy，发布网站。实际上deploy命令是将网页文件推送到远程仓库中。参考这一切是如何发生的？。" class="headerlink" title="d是deploy，发布网站。实际上deploy命令是将网页文件推送到远程仓库中。参考这一切是如何发生的？。"></a>d是deploy，发布网站。实际上deploy命令是将网页文件推送到远程仓库中。参考<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/one-command-deployment#%E8%BF%99%E4%B8%80%E5%88%87%E6%98%AF%E5%A6%82%E4%BD%95%E5%8F%91%E7%94%9F%E7%9A%84%EF%BC%9F">这一切是如何发生的？</a>。</h1></blockquote>
<p>或者也可以简化为两连：</p>
<blockquote>
<p>hexo clean<br>hexo g -d</p>
</blockquote>
<p>如果终端支持的话，还可以写进一行：</p>
<blockquote>
<p>hexo clean &amp;&amp; hexo g -d</p>
</blockquote>
<p>然后在浏览器地址栏中输入云服务器的公网IP或者绑定的域名（如果有的话），我们就可以访问到自己的网站啦。</p>
<p><img src="https://s2.loli.net/2022/05/01/fBLxY8jW3vz2lRi.png" alt="网站首页.png" loading="lazy"></p>
</div></section><ul class="post-copyright"><li class="post-copyright-author"><strong>Post author: </strong>绮罗传香</li><li class="post-copyright-link"><strong>Post link: </strong><a href="http://sagirichan.com/2022/04/30/blog-on-cloud/" title="如何把博客部署在云服务器上？">http://sagirichan.com/2022/04/30/blog-on-cloud/</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> unless otherwise stated.</li></ul></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2022/04/30/sagiri-and-Miss-Y/" rel="prev" title="纱雾与Y同学"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">纱雾与Y同学</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2022/04/24/git-learning/" rel="next" title="git-learning"><span class="post-nav-text">git-learning</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>要不要和我说些什么？</span><br></div></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 – 2022 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> 绮罗传香</span></div><div class="powered"><span>Powered by <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> v5.4.1</span><span class="footer-separator">|</span><span>Theme - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.7.0</span></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a></div></body></html>